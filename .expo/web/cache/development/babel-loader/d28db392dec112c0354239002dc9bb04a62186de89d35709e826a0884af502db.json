{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport * as SecureStore from 'expo-secure-store';\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\naxios.defaults.baseURL = 'http://127.0.0.1:8000';\nexport var AuthContext = React.createContext({});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser,\n      error: error,\n      login: function login(email, password) {\n        axios.post('/api/sanctum/token', {\n          email: email,\n          password: password,\n          device_name: 'mobile'\n        }).then(function (response) {\n          if (response) {\n            var userResponse = {\n              email: response.data.user.email,\n              token: response.data.token,\n              id: response.data.user.id,\n              role: response.data.user.role\n            };\n            setUser(userResponse);\n            console.log('This is theee User --> ', userResponse);\n            SecureStore.setItemAsync('user', JSON.stringify(userResponse));\n          }\n        }).catch(function (error) {\n          if (error && error.response && error.response.data) {\n            var key = Object.keys(error.response.data.errors)[0];\n            setError(error.response.data.errors[key][0]);\n            console.log(error, response);\n          }\n        });\n      },\n      logout: function logout() {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + user.token;\n        axios.post('/api/logout').then(function (response) {\n          console.log('hiiiiiiiii this is logout functin called');\n          setUser(null);\n          SecureStore.deleteItemAsync('user');\n        }).catch(function (error) {\n          console.log('hiiiiiiiii this is catch logout functin called');\n          console.log(error.response);\n        });\n      }\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useState","SecureStore","axios","defaults","baseURL","AuthContext","createContext","AuthProvider","children","user","setUser","error","setError","login","email","password","post","device_name","then","response","userResponse","data","token","id","role","console","log","setItemAsync","JSON","stringify","catch","key","Object","keys","errors","logout","headers","common","deleteItemAsync"],"sources":["D:/FYP/Projects/App_Projects/React Native Expo Cli Projects/gharbar_app/src/AuthProvider.js"],"sourcesContent":["import React, { useState } from 'react';\nimport * as SecureStore from 'expo-secure-store';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'http://127.0.0.1:8000';\n\nexport const AuthContext = React.createContext({});\n\nexport const AuthProvider = ({children}) => {\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState();\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        setUser,\n        error,\n        login: (email, password) => {\n          axios.post('/api/sanctum/token',{email,password,device_name:'mobile', })\n          .then(response => {\n            if(response) {\n              const userResponse = {\n                email: response.data.user.email,\n                token: response.data.token,\n                id: response.data.user.id,\n                role: response.data.user.role,\n              }\n              setUser(userResponse);\n              console.log('This is theee User --> ', userResponse);\n              SecureStore.setItemAsync('user', JSON.stringify(userResponse));\n            }\n          })\n          .catch(error => {\n            if(error && error.response && error.response.data) {\n              const key = Object.keys(error.response.data.errors)[0];\n              setError(error.response.data.errors[key][0]);\n              console.log(error, response);\n            }\n          })\n        },\n        logout: () => {\n          axios.defaults.headers.common['Authorization'] = `Bearer ${user.token}`;\n          axios.post('/api/logout')\n          .then(response => {\n            console.log('hiiiiiiiii this is logout functin called')\n            setUser(null);\n            SecureStore.deleteItemAsync('user')\n          })\n          .catch(error => {            console.log('hiiiiiiiii this is catch logout functin called')\n\n            console.log(error.response);\n          })\n        }\n      }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}