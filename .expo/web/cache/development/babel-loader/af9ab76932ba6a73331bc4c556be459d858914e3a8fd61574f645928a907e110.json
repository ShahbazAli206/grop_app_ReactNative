{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport * as SecureStore from 'expo-secure-store';\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\naxios.defaults.baseURL = 'http://127.0.0.1:8000';\nexport var AuthContext = React.createContext({});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser,\n      error: error,\n      login: function login(email, password) {\n        axios.post('/api/sanctum/token', {\n          email: email,\n          password: password,\n          device_name: 'mobile'\n        }).then(function (response) {\n          if (response) {\n            var userResponse = {\n              email: response.data.user.email,\n              token: response.data.token,\n              id: response.data.user.id\n            };\n            setUser(userResponse);\n            SecureStore.setItemAsync('user', JSON.stringify(userResponse));\n          }\n        }).catch(function (error) {\n          if (error && error.response && error.response.data) {\n            var key = Object.keys(error.response.data.errors)[0];\n            setError(error.response.data.errors[key][0]);\n            console.log(error, response);\n          }\n        });\n      },\n      logout: function logout() {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \" + user.token;\n        axios.post('/api/logout').then(function (response) {\n          setUser(null);\n          SecureStore.deleteItemAsync('user');\n        }).catch(function (error) {\n          console.log(error.response);\n        });\n      }\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useState","SecureStore","axios","jsx","_jsx","defaults","baseURL","AuthContext","createContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","error","setError","Provider","value","login","email","password","post","device_name","then","response","userResponse","data","token","id","setItemAsync","JSON","stringify","catch","key","Object","keys","errors","console","log","logout","headers","common","deleteItemAsync"],"sources":["D:/FYP/Projects/App_Projects/React Native Expo Cli Projects/gharbar_app/src/AuthProvider.js"],"sourcesContent":["import React, { useState } from 'react';\nimport * as SecureStore from 'expo-secure-store';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'http://127.0.0.1:8000';\n\nexport const AuthContext = React.createContext({});\n\nexport const AuthProvider = ({children}) => {\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState();\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        setUser,\n        error,\n        login: (email, password) => {\n          axios.post('/api/sanctum/token',{email,password,\n            device_name:'mobile',\n          })\n          .then(response => {\n            if(response) {\n              const userResponse = {\n                email: response.data.user.email,\n                token: response.data.token,\n                id: response.data.user.id,\n              }\n              setUser(userResponse);\n              SecureStore.setItemAsync('user', JSON.stringify(userResponse));\n            }\n          })\n          .catch(error => {\n            if(error && error.response && error.response.data) {\n              const key = Object.keys(error.response.data.errors)[0];\n              setError(error.response.data.errors[key][0]);\n              console.log(error, response);\n            }\n          })\n        },\n        logout: () => {\n          axios.defaults.headers.common['Authorization'] = `Bearer ${user.token}`;\n          axios.post('/api/logout')\n          .then(response => {\n            setUser(null);\n            SecureStore.deleteItemAsync('user')\n          })\n          .catch(error => {\n            console.log(error.response);\n          })\n        }\n      }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}